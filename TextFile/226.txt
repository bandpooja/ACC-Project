lit element - LitElement initialize State from Properties without default value - Stack Overflow
lit element - LitElement initialize State from Properties without default value - Stack Overflow Stack Overflow About Products For Teams Stack Overflow Public questions & answers Stack Overflow for Teams Where developers & technologists share private knowledge with coworkers Jobs Programming & related technical career opportunities Talent Recruit tech talent & build your employer brand Advertising Reach developers & technologists worldwide About the company Loading… Log in Sign up current community Stack Overflow help chat Meta Stack Overflow your communities Sign up or log in to customize your list. more stack exchange communities company blog Home Public Questions Tags Users Collectives Explore Collectives Find a Job Jobs Companies Teams Stack Overflow for Teams – Collaborate and share knowledge with a private group. Create a free Team What is Teams? Teams Create free Team Collectives on Stack Overflow Find centralized, trusted content and collaborate around the technologies you use most. Learn more Teams Q&A for work Connect and share knowledge within a single location that is structured and easy to search. Learn more LitElement initialize State from Properties without default value Ask Question Asked today Active today Viewed 6 times 0 I'm trying out Lit and I'm having trouble figuring out how to initialize a state field from props. Here's a basic contrived pagination component: export class Pagination extends BaseElement {
  static styles = [BaseElement.styles];

  @property({type: Number})
  selected = 0;

  @state()
  _selected = this.selected;

  @property({type: Number})
  total!: number;

  @property({type: Number})
  pageSize: number = 10;

  @state()
  _numPages = Math.ceil(this.total / this.pageSize);

  render() {
    const numPages = Math.ceil(this.total / this.pageSize);

    console.log(numPages, this._numPages, this._selected);

    return html`
      <ul class="pagination">
        <li><a href="#" rel="prev">${msg("Previous", {id: 'pagination.previous', desc: 'Previous button in pagination'})}</a></li>
        ${Array.from(Array(_numPages).keys()).map((e, i) => html`<li class=${this._selected === i ? "active" : ""}><a href="#">${i + 1}</a></li>`)}
        <li><a href="#" rel="next">${msg("Next", {id: 'pagination.next', desc: 'Previous button in pagination'})}</a></li>
      </ul>
    `;
  }
}
 This fails in render when using this._numPages, but is fine with numPages. It seems like if the state is using public properties that have defaults, it works, but otherwise it fails. I think this has to do with the fact that when the element is created it doesn't have props yet, so the initial first render doesn't have a value. But what is the right pattern to achieve this then in that case? The documentation here says "In some cases, internal reactive state may be initialized from public properties—for example, if there is a expensive transformation between the user-visible property and the internal state." (https://lit.dev/docs/components/properties/#public-properties-and-internal-state). lit-element Share Follow asked 4 hours ago errorline1errorline1 15811 silver badge1414 bronze badges Add a comment | 0 Active Oldest Votes Know someone who can answer? Share a link to this question via email, Twitter, or Facebook. Your Answer Thanks for contributing an answer to Stack Overflow! Please be sure to answer the question. Provide details and share your research! But avoid … Asking for help, clarification, or responding to other answers. Making statements based on opinion; back them up with references or personal experience. To learn more, see our tips on writing great answers. Draft saved Draft discarded Sign up or log in Sign up using Google Sign up using Facebook Sign up using Email and Password Submit Post as a guest Name Email Required, but never shown Post as a guest Name Email Required, but never shown Post Your Answer Discard By clicking “Post Your Answer”, you agree to our terms of service, privacy policy and cookie policy Browse other questions tagged lit-element or ask your own question. The Overflow Blog The four engineering metrics that will streamline your software delivery Podcast 396: Does modern parenting require spyware? Featured on Meta Reducing the weight of our footer Two B or not two B - Farewell, BoltClock and Bhargav! Community input needed: The rules for collectives articles Related 1 LitElement rendering template without values 2 LitElement render() not called on quick state updates 26 How to create LitElement without Shadow DOM? 1 Call LitElement method from outside the element 0 Passing multiple duplicate properties in multiple LitElement 0 Retrieve properties data from LitElement Web Component 0 LitElement maintain internal state 0 LitElement rendering collection of other elements with properties 0 Lit / LitElement ReactiveElement static properties 0 How to pass nested data structures as properties in LitElement? Hot Network Questions Can I initialize only one qubit in a 4-qubit circuit? What is the difference between /lib and /usr/lib and /var/lib? How to correctly use lists inside Compile How annoying are mouse clicks on an air plane How to justify burning people for energy? Skim excess power from a resonant circuit without draining it? Is it ethical to convince someone to get vaccinated? How to translate “Wir müssen wissen, wir werden wissen.” into Latin? Why can the UK's Competition and Markets Authority tell Facebook to sell Giphy? Airflow too strong in one of the registers Remote sensing of glaciers, season for data collection What is the simplest way to invert a signal with just one jumper? VLC won't work on Ubuntu 20.04.3 LTS Are database unique indexes a mask on bad scripting? DC-DC Converter output: 6.21 V instead of 5.5 V What sign language does Makkari use? Converting polygon to list of coordinates with shapely How often do I need to hand out spell scrolls as the DM in order to balance the Wizard's spell list with the Cleric's? How can you replace the last occurrence of a character in a string (text column)? All distances different on a chessboard What is the difference between a waiting move and zugzwang? Worst case of Slowsort Find shortest path between two vertices that uses at most one negative edge What is the structure from which a sign is hung called? more hot questions Question feed Subscribe to RSS Question feed To subscribe to this RSS feed, copy and paste this URL into your RSS reader. Stack Overflow Questions Jobs Developer Jobs Directory Salary Calculator Help Mobile Products Teams Talent Advertising Enterprise Company About Press Work Here Legal Privacy Policy Terms of Service Contact Us Cookie Settings Cookie Policy Stack Exchange Network Technology Culture & recreation Life & arts Science Professional Business API Data Blog Facebook Twitter LinkedIn Instagram site design / logo © 2021 Stack Exchange Inc; user contributions licensed under cc by-sa. rev 2021.11.30.40849 Stack Overflow works best with JavaScript enabled Your privacy By clicking “Accept all cookies”, you agree Stack Exchange can store cookies on your device and disclose information in accordance with our Cookie Policy. Accept all cookies Customize settings